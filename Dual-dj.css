:root{
  --bg:#0b0c0f;
  --text:#e8eaf0;
  --muted:#9aa3b2;

  --chrome1:#d7d9dd;
  --chrome2:#aeb3ba;
  --chrome3:#f7f8fa;

  --vinyl-base: rgb(0,0,0);
  --vinyl-sheen-1: rgb(47,47,47);
  --vinyl-sheen-2: rgb(74,74,74);
  --vinyl-sheen-glow: rgba(255,255,255,.16);

  --led:#19d0e3;
  --led2:#7cffb2;

  --arm-glint: 0;


  

  /* ✅ Réglages bras (degrés) */
  --arm-start-deg: 30;
  --arm-end-deg: -6;
/* ✅ Ring noir autour du label (comme sur un vinyle 33T) */
  --label-ring: clamp(14px, 1.8vw, 24px);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:var(--text);
  background:
    radial-gradient(1200px 600px at 50% -10%, rgba(120,150,255,.14), transparent 60%),
    radial-gradient(900px 500px at 30% 105%, rgba(255,120,190,.10), transparent 55%),
    linear-gradient(180deg, #07080b, var(--bg));
}

/* ✅ Background cover flou plein écran */
.bgCover{
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;

  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;

  transform: scale(1.10);
  filter: blur(28px) saturate(1.08) contrast(1.06);
  opacity: 0.50;

  transition: opacity .35s ease, background-image .35s ease;
}

/* voile sombre + vignette */
.bgCover::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(1100px 620px at 50% 28%, rgba(255,255,255,.06), rgba(0,0,0,.60) 62%, rgba(0,0,0,.82) 100%),
    linear-gradient(180deg, rgba(0,0,0,.34), rgba(0,0,0,.76));
}

.app{
  position:relative;
  z-index:1;
  max-width:1320px;
  margin:0 auto;
  padding:18px 18px 28px;
}

.topbar{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px;flex-wrap:wrap}
.brand{display:flex;align-items:baseline;gap:10px;user-select:none}
.brand h1{font-size:16px;letter-spacing:.5px;margin:0;font-weight:900}
.brand span{font-size:12px;color:var(--muted)}

.dj{
  position:relative;
  display:grid;
  grid-template-columns: 1fr 360px 1fr;
  gap: 16px;
  align-items:stretch;
  padding: 16px;
  border-radius: 22px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  box-shadow: 0 22px 60px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.10);
}
@media (max-width: 1120px){ .dj{ grid-template-columns: 1fr; } }

.deck,.mixer{
  position:relative;
  border-radius: 20px;
  overflow:hidden;
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: 0 18px 40px rgba(0,0,0,.50), inset 0 1px 0 rgba(255,255,255,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.02));
  min-height: 610px;
}
@media (max-width: 1120px){ .deck,.mixer{ min-height: 600px; } }

.face{
  position:absolute;inset:0;
  background:
    linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.58)),
    repeating-linear-gradient(90deg, rgba(255,255,255,.10) 0px, rgba(255,255,255,.10) 1px, rgba(255,255,255,.06) 2px, rgba(255,255,255,.06) 3px),
    linear-gradient(135deg, var(--chrome3), var(--chrome2) 45%, var(--chrome1));
  filter:saturate(.75) contrast(1.05);
  opacity:.62;
}
.deckInner{position:relative;height:100%;padding:16px}
.deckLabel{
  position:absolute;
  left:16px;
  top:12px;          /* ✅ en haut */
  bottom:auto;       /* ✅ plus en bas */
  font-size:12px;
  letter-spacing:1.6px;
  font-weight:900;
  color: rgba(255,255,255,.75);
  text-shadow:0 1px 0 rgba(0,0,0,.5);
  user-select:none;
}



/* ✅ Deck B : léger grain/lueur en bas pour éviter le "vide" */
.deckB::after{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  border-radius: 20px;
  background:
    radial-gradient(900px 520px at 55% 115%, rgba(255,255,255,.06), transparent 55%),
    radial-gradient(820px 480px at 50% 110%, rgba(255,120,190,.07), transparent 58%),
    linear-gradient(180deg, rgba(255,255,255,0), rgba(0,0,0,.10) 72%, rgba(0,0,0,.22));
  opacity: .55;
  mix-blend-mode: overlay;
}

/* ==== PLATTER (TOUJOURS ROND) ==== */
.platter{
  position:absolute;
  top: 18px;
  left: 50%;
  transform: translateX(-50%);
  width: min(520px, calc(100% - 36px));
  aspect-ratio: 1 / 1;
  border-radius: 999px;
  background:
    radial-gradient(circle at 50% 50%, rgba(255,255,255,.10), rgba(0,0,0,.65) 62%, rgba(0,0,0,.88) 100%);
  border: 1px solid rgba(255,255,255,.14);
  box-shadow:
    inset 0 0 0 10px rgba(255,255,255,.03),
    inset 0 0 30px rgba(0,0,0,.55),
    0 14px 26px rgba(0,0,0,.45);
  display:grid;
  place-items:center;
}
.diskMount{ position:absolute; inset:0; display:grid; place-items:center; }

/* =======================
   ✅ AudioMotion RADIAL RING (Deck A vide)
   ======================= */
/* ===========================
   ✅ AudioMotion RADIAL RING (plus visible)
   =========================== */

.platterViz{
  position: absolute;
  inset: 14px;                 /* plus large => mieux visible */
  border-radius: 999px;
  overflow: hidden;
  pointer-events: none;
  opacity: 0;
  transform: scale(.99);
  transition: opacity .35s ease, transform .35s ease;
  z-index: 25;                 /* au-dessus de tout dans le platter */

  /* ✅ anneau plus épais (moins "mangé") */
  -webkit-mask-image: radial-gradient(circle at 50% 50%,
    transparent 0 46%,
    #000 50% 96%,
    transparent 98% 100%);
  mask-image: radial-gradient(circle at 50% 50%,
    transparent 0 46%,
    #000 50% 96%,
    transparent 98% 100%);

  /* boost visuel */
  filter: saturate(1.25) contrast(1.15) brightness(1.12);
}
.platterViz.isOn{
  opacity: 1;                  /* ✅ full visible */
  transform: scale(1);
}

.platterVizGlow{
  position:absolute;
  inset:-22px;
  border-radius: 999px;
  background:
    radial-gradient(circle at 50% 50%, rgba(25,208,227,.18), rgba(0,0,0,0) 52%),
    radial-gradient(circle at 50% 50%, rgba(25,208,227,.12), rgba(0,0,0,0) 70%),
    radial-gradient(circle at 50% 50%, rgba(255,255,255,.06), rgba(0,0,0,0) 62%);
  filter: blur(2px);
  opacity: 1;
  z-index: 0;
}

.platterViz canvas{
  position:absolute;
  inset:0;
  width:100% !important;
  height:100% !important;
  z-index:1;

  /* ✅ look LED qui "claque" */
  opacity: 1;
  mix-blend-mode: screen;
  filter: drop-shadow(0 0 10px rgba(25,208,227,.20))
          drop-shadow(0 0 22px rgba(25,208,227,.14));
}

/* ✅ IMPORTANT : quand le disque est sur B, le wrap A ne doit pas "assombrir" le viz */
#wrapA{
  box-shadow: none !important;
  background: transparent !important;
}

/* =======================
   LUNA VINYL
   ======================= */
.disk-wrap{
  width: min(420px, 86%);
  aspect-ratio: 1/1;
  border-radius: 50%;
  position: relative;
  display: grid;
  place-items: center;
  isolation: isolate;
  background: transparent;
  box-shadow: 0 16px 60px rgba(0,0,0,.35);
  overflow: visible;
}

#disk{
  position:relative;
  z-index: 10; /* disque au-dessus du viz quand présent */
}

.disk{
  width:92%;
  height:92%;
  border-radius:50%;
  position:relative;
  overflow:hidden;
  will-change: transform;
  z-index:2;
  background:
    radial-gradient(circle at 50% 55%, rgba(0,0,0,.05), rgba(0,0,0,.78) 70%, rgba(0,0,0,.92) 100%),
    linear-gradient(-45deg,
      var(--vinyl-sheen-1),
      var(--vinyl-base),
      var(--vinyl-sheen-2),
      var(--vinyl-base),
      var(--vinyl-sheen-1)) !important;
  background-color: var(--vinyl-base) !important;
}
.disk::after{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:50%;
  background:
    radial-gradient(ellipse 140% 75% at 50% 0%,
      var(--vinyl-sheen-glow) 0%,
      rgba(255,255,255,.06) 22%,
      rgba(255,255,255,0) 58%),

    repeating-radial-gradient(circle at 50% 50%,
      rgba(255,255,255,.030) 0px,
      rgba(255,255,255,.030) 1px,
      rgba(0,0,0,0) 1px,
      rgba(0,0,0,0) 8px),

    repeating-radial-gradient(circle at 50% 50%,
      rgba(0,0,0,.10) 0px,
      rgba(0,0,0,.10) 2px,
      rgba(0,0,0,0) 2px,
      rgba(0,0,0,0) 14px),

    radial-gradient(circle at 30% 28%, rgba(255,255,255,.14), rgba(255,255,255,0) 44%),
    radial-gradient(circle at 70% 78%, rgba(0,0,0,.34), rgba(0,0,0,0) 58%) !important;
  opacity: .68 !important;
  pointer-events:none;
}
/* ✅ Centre métallique */
.disk::before{
  content:"";
  position:absolute;
  left:50%;
  top:50%;
  width:9.5%;
  height:9.5%;
  transform:translate(-50%,-50%);
  border-radius:50%;
  background:
    radial-gradient(circle at 35% 35%,
      rgba(255,255,255,.85) 0%,
      rgba(255,255,255,.22) 32%,
      rgba(0,0,0,.38) 58%,
      rgba(0,0,0,.78) 100%);
  box-shadow:
    0 0 0 2px rgba(0,0,0,.62),
    0 0 0 1px rgba(255,255,255,.32) inset,
    0 1px 3px rgba(0,0,0,.55);
  opacity:.98;
  z-index: 10;
  pointer-events:none;
}
/* ✅ Label centre : cover piste (image) */
.disk-label{
  position:absolute;
  left:50%;
  top:50%;
  /* ✅ taille = cover (42%) + ring des 2 côtés */
  width: calc(42% + (var(--label-ring) * 2));
  height: calc(42% + (var(--label-ring) * 2));
  transform:translate(-50%,-50%);
  border-radius:50%;
  box-sizing:border-box;
  padding: var(--label-ring);
  z-index: 6;
  pointer-events:none;
  isolation:isolate;

  /* ✅ Ring "matière vinyle" (subtil, comme le disque) */
  background:
    radial-gradient(circle at 50% 50%, rgba(0,0,0,.18) 0%, rgba(0,0,0,0) 70%),
    repeating-radial-gradient(circle at 50% 50%,
      rgba(255,255,255,.045) 0px,
      rgba(255,255,255,.045) 1px,
      rgba(255,255,255,0) 1px,
      rgba(255,255,255,0) 7px),
    radial-gradient(circle at 32% 26%, rgba(255,255,255,.10), rgba(255,255,255,0) 45%),
    radial-gradient(circle at 72% 80%, rgba(0,0,0,.38), rgba(0,0,0,0) 60%);
  filter:saturate(.80) contrast(1.05);

  box-shadow:
    0 10px 22px rgba(0,0,0,.55),
    0 0 0 1px rgba(255,255,255,.10) inset;
}


/* ✅ Lueur / rainures sur le ring (tourne avec le disque car l’élément est dans le disque) */
.disk-label::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:50%;
  pointer-events:none;
  z-index:0;

  /* ✅ liseré / brillance très subtil (effet disque qui tourne) */
  background:
    radial-gradient(ellipse 135% 78% at 50% 0%,
      rgba(255,255,255,.16) 0%,
      rgba(255,255,255,.05) 26%,
      rgba(255,255,255,0) 62%),
    conic-gradient(from 220deg,
      rgba(255,255,255,0) 0deg,
      rgba(255,255,255,.07) 18deg,
      rgba(255,255,255,0) 46deg,
      rgba(255,255,255,0) 360deg);
  mix-blend-mode: soft-light;
  opacity:.46;

  /* ✅ masque : ne garder que l’anneau (pas le centre/cover) */
  -webkit-mask: radial-gradient(circle at 50% 50%,
      transparent calc(50% - var(--label-ring) - 1px),
      #000 calc(50% - var(--label-ring) + 1px));
          mask: radial-gradient(circle at 50% 50%,
      transparent calc(50% - var(--label-ring) - 1px),
      #000 calc(50% - var(--label-ring) + 1px));
}


/* ✅ Cover (image) : on garde un vrai rond, au-dessus du ring */
.disk-label > img{
  position:relative;
  z-index:1;
  width:100%;
  height:100%;
  display:block;
  border-radius:50%;
  object-fit:cover;
  box-shadow:
    0 0 0 1px rgba(255,255,255,.10) inset,
    0 6px 14px rgba(0,0,0,.35);
}

.disk-label img{
  width:100%;
  height:100%;
  display:block;
  object-fit: cover;
  object-position: center center;
  filter: saturate(.98) contrast(1.03);
}

/* FX spin */
.vinyl-fx{
  position:absolute;
  inset:-2px;
  border-radius:50%;
  pointer-events:none;
  z-index: 3;
  transform: rotate(var(--spin, 0rad));
  will-change: transform, opacity;
  opacity: .78;
}
.vinyl-fx::before{
  content:"";
  position:absolute;
  inset:-6px;
  border-radius:50%;
  background:
    conic-gradient(from 210deg, rgba(255,255,255,0) 0deg, rgba(255,255,255,.10) 18deg, rgba(255,255,255,0) 42deg, rgba(255,255,255,0) 360deg),
    radial-gradient(ellipse 140% 78% at 50% 0%, var(--vinyl-sheen-glow) 0%, rgba(255,255,255,.05) 20%, rgba(255,255,255,0) 58%),
    radial-gradient(circle at 50% 50%, rgba(0,0,0,0) 54%, rgba(0,0,0,.12) 78%, rgba(0,0,0,0) 100%);
  mix-blend-mode: screen;
  opacity:.72;
}
.vinyl-fx::after{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:50%;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,.10) 0 1px, rgba(255,255,255,0) 2px),
    radial-gradient(circle at 65% 28%, rgba(255,255,255,.08) 0 1px, rgba(255,255,255,0) 2px),
    radial-gradient(circle at 78% 62%, rgba(255,255,255,.08) 0 1px, rgba(255,255,255,0) 2px),
    radial-gradient(circle at 35% 72%, rgba(255,255,255,.07) 0 1px, rgba(255,255,255,0) 2px),
    radial-gradient(circle at 52% 58%, rgba(255,255,255,.06) 0 1px, rgba(255,255,255,0) 2px);
  opacity:.22;
  mix-blend-mode: overlay;
}

/* =======================
   TONEARM (RIGHT SIDE) - Deck B
   ======================= */
.tonearm-layer{
  position:absolute;
  inset:0;
  border-radius:50%;
  pointer-events:none;
  z-index: 20;
  filter:
    drop-shadow(0 18px 26px rgba(0,0,0,.40))
    brightness(calc(1 + var(--arm-glint, 0)))
    contrast(1.02);
}
.tonearm-rotor{
  position:absolute;
  width:82%;
  aspect-ratio:1/1;
  right:-20%;
  top:-11%;
  left:auto;
  transform-origin: 81.25% 18.75%;
  transform: rotate(var(--arm-rot, 40deg));
  will-change: transform;
}
.armMirror{position:absolute;inset:0;transform: scaleX(-1);transform-origin: 50% 50%;}
.armMirror svg{ width:100%; height:100%; display:block; }

.stylus-dot{
  position:absolute;
  left: 63.38%;
  top: 56.31%;
  width:14px;height:14px;border-radius:6px;
  background: rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.14);
  box-shadow: 0 0 12px rgba(255,255,255,.10);
  transform: translate(-50%,-50%) translateY(-7px);
  transition: transform .22s cubic-bezier(.2,.9,.2,1);
}
.tonearm-layer.down .stylus-dot{ transform: translate(-50%,-50%) translateY(0); }
@keyframes tonearmMicro{
  0%,100%{ transform: rotate(var(--arm-rot, 40deg)) translateY(0); }
  50%{ transform: rotate(var(--arm-rot, 40deg)) translateY(.55px); }
}
.tonearm-layer.down.playing .tonearm-rotor{ animation: tonearmMicro 1.1s ease-in-out infinite; }

/* =======================
   MIXER
   ======================= */
.mixer .face{ opacity:.58; }
.mixerInner{
  position:relative;height:100%;
  padding:16px 16px 18px;
  display:flex;
  flex-direction:column;
  gap:14px;
  justify-content:space-between;
}
.mixerTitle{
  font-weight:900;letter-spacing:2px;font-size:12px;color:rgba(255,255,255,.78);
  user-select:none;display:flex;justify-content:space-between;align-items:center;
}
.mixerTitle small{ color: var(--muted); font-weight:700; letter-spacing:.3px; }

.controlPanel{
  border-radius:18px;
  border:1px solid rgba(255,255,255,.10);
  background: linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.55));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 16px 30px rgba(0,0,0,.35);
  padding:14px;
  overflow:hidden; /* ✅ sécurité */
}

.panelRow{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
}

.djButtons{
  width: 100%;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr)); /* ✅ ne déborde jamais */
  gap: 10px;
  align-items: center;
}
@media (max-width: 1120px){
  .djButtons{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 520px){
  .djButtons{ grid-template-columns: 1fr; }
}

.djBtn{
  appearance:none;
  border:1px solid rgba(255,255,255,.14);
  color: rgba(255,255,255,.92);
  cursor:pointer;
  padding: 10px 12px;
  border-radius: 14px;
  font-weight:900;
  letter-spacing:.3px;
  user-select:none;
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,.18), rgba(255,255,255,0) 40%),
    linear-gradient(180deg, rgba(255,255,255,.12), rgba(0,0,0,.55));
  box-shadow:
    0 14px 22px rgba(0,0,0,.35),
    inset 0 1px 0 rgba(255,255,255,.10);
  transition: transform .08s ease, filter .15s ease, border-color .15s ease;
  width: 100%;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.djBtn:hover{ filter: brightness(1.05); border-color: rgba(255,255,255,.22); }
.djBtn:active{ transform: translateY(1px); }
.djBtn[disabled]{ opacity:.55; cursor:not-allowed; }

.djBtn.primary{
  padding: 12px 14px;
  border-radius: 16px;
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,.22), rgba(255,255,255,0) 42%),
    linear-gradient(180deg, rgba(255,255,255,.14), rgba(0,0,0,.62));
  border-color: rgba(255,255,255,.18);
  box-shadow:
    0 18px 28px rgba(0,0,0,.42),
    inset 0 1px 0 rgba(255,255,255,.12);
  position:relative;
}
.djBtn.primary::after{
  content:"";
  position:absolute;
  left:8px; top:26%;
  transform: translateY(-50%);
  width:10px;height:10px;border-radius:999px;
  background: rgba(255,255,255,.22);
  box-shadow: 0 0 0 4px rgba(255,255,255,.05);
}
.djBtn.primary.on::after{
  background: var(--led2);
  box-shadow: 0 0 18px color-mix(in srgb, var(--led2) 35%, transparent), 0 0 0 4px rgba(255,255,255,.05);
}

.djBtn.toggle.on{
  border-color: color-mix(in srgb, var(--led) 55%, rgba(255,255,255,.20));
  box-shadow:
    0 16px 26px rgba(0,0,0,.40),
    inset 0 1px 0 rgba(255,255,255,.10),
    0 0 18px color-mix(in srgb, var(--led) 22%, transparent);
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,.18), rgba(255,255,255,0) 42%),
    linear-gradient(180deg, color-mix(in srgb, var(--led) 18%, rgba(255,255,255,.08)), rgba(0,0,0,.62));
}
.djBtn.mini{ padding: 10px 12px; border-radius: 14px; position:relative; }
.djBtn.mini::after{
  content:"";
  position:absolute;
  right:10px; top:50%;
  transform: translateY(-50%);
  width:6px;height:6px;border-radius:999px;
  background: rgba(255,255,255,.20);
}
.djBtn.mini.on::after{ background: var(--led); box-shadow: 0 0 14px color-mix(in srgb, var(--led) 28%, transparent); }

.djBtn.eject{ border-color: rgba(255,255,255,.16); }
.djBtn.eject:hover{ border-color: rgba(255,255,255,.26); }

.statusChip{
  display:flex;
  align-items:center;
  gap:8px;
  padding: 8px 10px;
  border-radius: 999px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.35);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  color: var(--muted);
  font-size: 12px;
  white-space: nowrap;
  width: fit-content;
  max-width: 100%;
}
.chipDot{
  width:8px;height:8px;border-radius:999px;
  background: rgba(255,255,255,.22);
  box-shadow: 0 0 0 2px rgba(255,255,255,.06);
}
.chipDot.on{
  background: var(--led2);
  box-shadow: 0 0 12px color-mix(in srgb, var(--led2) 35%, transparent);
}

.nowPlaying{
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.28);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  display:flex;
  align-items:center;
  gap:10px;
}
.nowCover{
  width:42px;height:42px;border-radius:10px;
  border:1px solid rgba(255,255,255,.12);
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.45));
  background-size: cover;
  background-position:center;
  box-shadow: 0 12px 18px rgba(0,0,0,.35);
  flex: 0 0 auto;
}
.nowMeta{min-width:0}
.nowTitle{font-weight:900;font-size: 12px;letter-spacing:.3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.nowSub{font-size: 11px;color: var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

.vuBox{
  margin-top: 12px;
  border-radius: 16px;
  border:1px solid rgba(255,255,255,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.55));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  padding: 12px;
}
.vuHeader{
  display:flex;align-items:center;justify-content:space-between;
  margin-bottom: 10px;
  color: rgba(255,255,255,.70);
  font-size: 11px;
  letter-spacing: 1.2px;
  font-weight: 900;
}
.vuHeader span:last-child{ color: #13c4d6; font-weight: 800; letter-spacing: .2px; }
.vuMeter{
  height: 96px; /* comme ta capture */
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.45);
  position:relative;
  overflow:hidden;
  padding: 10px;
  display:flex;
  gap:6px;
  align-items:flex-end;
}
.vuMeter::before{
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(800px 200px at 50% 0%, rgba(255,255,255,.07), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.55));
  pointer-events:none;
}
.vuBar{
  width: 10px;
  border-radius: 8px;
  height: 8%;
  background:
    linear-gradient(180deg,
      rgba(255,255,255,.15),
      color-mix(in srgb, var(--led) 70%, rgba(0,0,0,.30)));
  box-shadow: 0 0 14px color-mix(in srgb, var(--led) 18%, transparent);
  transform-origin: bottom;
  position:relative;
  z-index:2;
  opacity:.95;
}
.vuBar.hot{
  background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,120,120,.85));
  box-shadow: 0 0 14px rgba(255,120,120,.22);
}

.mixerHelp{ color:var(--muted); font-size:12px; line-height:1.45; opacity:.95; }



/* ✅ Help déplacé en bas de Deck A */
.deckHelp{
  position:absolute;
  left:16px;
  right:16px;
  bottom:12px;

  /* ✅ meilleure lisibilité */
  padding: 10px 12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(700px 140px at 20% 0%, rgba(255,255,255,.08), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.46));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 14px 22px rgba(0,0,0,.26);

  color: rgba(255,255,255,.72);
  font-size:12px;
  line-height:1.45;
  opacity: .96;

  pointer-events:none;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}



/* ✅ Deck A help chip auto-hide (quand viz ON) */
.deckHelp{
  transition: opacity .22s ease, transform .22s ease;
}
.deckHelp.isHidden{
  opacity: 0 !important;
  transform: translateY(6px);
}

/* ✅ espace bas Deck A (deckHelp supprimé) */
.deckA .deckInner{
  padding-bottom: 16px;
}



/* ===== Speakers (drivers only) — placed under platters, without changing layout ===== */
.speakerSlot{
  position:absolute;
  left:50%;
  transform: translateX(-50%);
  z-index: 25;
  pointer-events:none;

  /* sized + positioned by JS (layoutSpeakers) */
  width: 160px;
  height: 160px;

  opacity: .98;
  /* shadow is handled inside the SVG filters (prevents square haze) */
  filter: none;
}
.speakerSvg{ width:100%; height:100%; display:block; }

/* Color adaptation per deck (subtle premium tint) */
.speakerSlotA{
  --sp-accent-hi: rgba(25, 208, 227, 0.16);
  --sp-accent-ring: rgba(25, 208, 227, 0.22);
}
.speakerSlotB{
  --sp-accent-hi: rgba(200, 120, 255, 0.14);
  --sp-accent-ring: rgba(255, 120, 210, 0.16);
}

/* ===== Carriage overlay (A→B) ===== */
.carriageLayer{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index: 60;

  /* ✅ caché par défaut (évite l'overlay visible au repos) */
  opacity: 0;
  transition: opacity .18s ease;
}
.carriageLayer.active{
  opacity: 1;
}

.rail{
  position:absolute; left:16px; right:16px; top: 4px;
  height: 14px; border-radius:999px;
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.55));
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 10px 18px rgba(0,0,0,.35);
  opacity:.88;
}
.carriage{
  position:absolute; top: 6px; left: 50%;
  transform: translateX(-50%);
  width: 86px; height: 28px;
  border-radius:999px;
  background: linear-gradient(180deg, rgba(255,255,255,.22), rgba(0,0,0,.55));
  border: 1px solid rgba(255,255,255,.14);
  box-shadow: 0 16px 22px rgba(0,0,0,.40), inset 0 1px 0 rgba(255,255,255,.10);
  transition: transform 1100ms cubic-bezier(.2,.85,.2,1);
}
.gripper{
  position:absolute; left:50%; top: 22px;
  transform: translateX(-50%);
  width: 80px; height: 54px;
  opacity:.95;
  filter: drop-shadow(0 14px 16px rgba(0,0,0,.45));
  transition: transform 520ms cubic-bezier(.2,.85,.2,1), opacity 520ms ease;
}
.jaw{
  position:absolute; top: 6px;
  width: 34px; height: 40px; border-radius:12px;
  background: linear-gradient(180deg, rgba(255,255,255,.22), rgba(0,0,0,.55));
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 14px 18px rgba(0,0,0,.35);
}
.jaw.left{ left:4px; transform: rotate(6deg) translateX(0px); }
.jaw.right{ right:4px; transform: rotate(-6deg) translateX(0px); }
.gripper.open .jaw.left{ transform: rotate(10deg) translateX(-10px); }
.gripper.open .jaw.right{ transform: rotate(-10deg) translateX(10px); }
.gripper.close .jaw.left{ transform: rotate(2deg) translateX(6px); }
.gripper.close .jaw.right{ transform: rotate(-2deg) translateX(-6px); }
.gripper.lift{ transform: translateX(-50%) translateY(-10px); }
.gripper.down{ transform: translateX(-50%) translateY(40px); }

.recordCarrier{
  position:absolute;
  left:0; top:0;
  transform: translate(-50%,-50%);
  width: 420px; height: 420px;
  pointer-events:none;
  z-index: 70;
  opacity: 0;
}
.recordCarrier.on{ opacity:1; }

/* =======================
   DRAWER (LUNA STYLE)
   ======================= */
.drawerOverlay{
  position:fixed; inset:0;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  opacity:0;
  pointer-events:none;
  transition: opacity .22s ease;
  z-index: 200;
}
.drawerOverlay.open{ opacity:1; pointer-events:auto; }

.drawer{
  position:fixed;

  /* ✅ même position + dimensions que #dj (calculé en JS via syncDrawerToDj) */
  left: var(--dj-left, 0px);
  top:  var(--dj-top,  0px);
  width:  var(--dj-w, min(980px, 92vw));
  height: var(--dj-h, 100vh);

  border-radius: 22px;
  overflow: hidden;

  /* ✅ animation top-down */
  transform: translateY(calc(-100% - 18px));
  transition: transform .28s cubic-bezier(.2,.9,.2,1), opacity .22s ease;
  opacity: 0;

  z-index: 210;

  border: 1px solid rgba(255,255,255,.12);
  box-shadow: 0 26px 70px rgba(0,0,0,.55);
  background:
    radial-gradient(900px 400px at 20% 0%, rgba(120,150,255,.14), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.58));
}
.drawer.open{
  transform: translateY(0);
  opacity: 1;
}

.drawerInner{
  height:100%;
  padding: 16px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.drawerHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding: 10px 12px;
  border-radius: 16px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.28);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
}
.drawerHeader h2{
  margin:0;
  font-size:12px;
  letter-spacing:2px;
  font-weight:900;
  color: rgba(255,255,255,.85);
}
.drawerHeader .drawerActions{ display:flex; gap:10px; align-items:center; }

.drawerClose{
  appearance:none;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.90);
  padding: 10px 12px;
  border-radius: 14px;
  cursor:pointer;
  font-weight:900;
  letter-spacing:.3px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 12px 20px rgba(0,0,0,.35);
}
.drawerClose:hover{ background: rgba(255,255,255,.09); border-color: rgba(255,255,255,.22); }

.drawerBody{
  flex:1;
  min-height:0;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
@media (max-width: 880px){ .drawerBody{ grid-template-columns: 1fr; } }

.drawerPane{
  min-height:0;
  border-radius: 18px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.26);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  overflow:hidden;
  display:flex;
  flex-direction:column;
}
.paneHead{
  padding: 12px 12px 10px;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  border-bottom: 1px solid rgba(255,255,255,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.22));
}
.paneHead .title{ display:flex; flex-direction:column; gap:2px; min-width:0; }
.paneHead .title b{ font-size: 12px; letter-spacing: 1.6px; }
.paneHead .title span{ font-size: 11px; color: var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.paneHead .pill{
  font-size: 11px;
  font-weight: 900;
  letter-spacing: .3px;
  padding: 6px 10px;
  border-radius: 999px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.28);
  color: rgba(255,255,255,.82);
}
.paneScroll{ flex:1; min-height:0; overflow:auto; padding: 10px; }

.playlistGrid{ display:grid; grid-template-columns: 1fr; gap:10px; }
.playCard{
  display:flex; gap:10px; align-items:center;
  padding: 10px;
  border-radius: 16px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.20);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  cursor:pointer;
  transition: transform .08s ease, border-color .15s ease, background .15s ease;
}
.playCard:hover{ border-color: rgba(255,255,255,.18); background: rgba(255,255,255,.05); }
.playCard:active{ transform: translateY(1px); }
.playCard.active{
  border-color: color-mix(in srgb, var(--led) 45%, rgba(255,255,255,.20));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.10), 0 0 18px color-mix(in srgb, var(--led) 14%, transparent);
}
.playCover{
  width:56px;height:56px;border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.45));
  background-size:cover;background-position:center;
  box-shadow: 0 14px 22px rgba(0,0,0,.35);
  flex:0 0 auto;
}
.playMeta{min-width:0}
.playName{ font-weight: 900; font-size: 12px; letter-spacing: .4px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.playSub{ font-size: 11px; color: var(--muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.trackList{ display:flex; flex-direction:column; gap:8px; }
.trackItem{
  display:flex; align-items:center; gap:10px;
  padding: 9px 10px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.07);
  cursor:pointer;
  transition: transform .08s ease, border-color .15s ease, background .15s ease;
}
.trackItem:hover{ background: rgba(255,255,255,.05); border-color: rgba(255,255,255,.18); }
.trackItem:active{ transform: translateY(1px); }
.trackItem.active{
  border-color: color-mix(in srgb, var(--led2) 45%, rgba(255,255,255,.20));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.10), 0 0 18px color-mix(in srgb, var(--led2) 14%, transparent);
}
.trackThumb{
  width:42px;height:42px;border-radius:12px;
  border:1px solid rgba(255,255,255,.12);
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.45));
  background-size:cover;background-position:center;
  box-shadow: 0 12px 18px rgba(0,0,0,.35);
  flex:0 0 auto;
}
.trackTxt{ min-width:0; flex:1; }
.trackTitle{ font-weight: 900; font-size: 12px; letter-spacing:.2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.trackSub{ font-size: 11px; color: var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.badge{
  font-size: 11px;
  font-weight: 900;
  letter-spacing:.3px;
  padding: 6px 10px;
  border-radius: 999px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.30);
  color: rgba(255,255,255,.85);
}
.badge.live{
  border-color: color-mix(in srgb, var(--led) 55%, rgba(255,255,255,.14));
  box-shadow: 0 0 14px color-mix(in srgb, var(--led) 18%, transparent);
}
.drawerHint{
  padding: 10px 12px;
  border-radius: 16px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  color: var(--muted);
  font-size: 12px;
  line-height: 1.45;
}

/* =========================================================
   ✅ MODE "LUNA LED RING" — applique 1 + 2 + 3 (final)
   ========================================================= */

/* 1) Plateau plus réaliste (cuvette + vignette) */
#platterA{
  position: relative;
}
#platterA::before{
  content:"";
  position:absolute;
  inset: 10px;
  border-radius: 999px;
  pointer-events:none;
  z-index: 2;

  background:
    radial-gradient(circle at 50% 50%,
      rgba(0,0,0,.65) 0%,
      rgba(0,0,0,.15) 38%,
      rgba(0,0,0,.65) 78%,
      rgba(0,0,0,.88) 100%),
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.10), rgba(255,255,255,0) 42%);
  opacity: .55;
}

/* ✅ Hub métal centré (Suggestion 1) */
.platterHub{
  position:absolute;
  left:50%;
  top:50%;
  transform: translate(-50%,-50%);
  width: 32px;
  height: 32px;
  border-radius: 999px;
  z-index: 28;               /* au-dessus du viz */
  pointer-events:none;
  opacity: .92;

  background:
    radial-gradient(circle at 35% 30%,
      rgba(255,255,255,.92) 0%,
      rgba(255,255,255,.22) 32%,
      rgba(0,0,0,.45) 62%,
      rgba(0,0,0,.88) 100%);
  box-shadow:
    0 0 0 2px rgba(0,0,0,.65),
    inset 0 1px 0 rgba(255,255,255,.25),
    0 10px 18px rgba(0,0,0,.45);
}
/* ✅ Hub Deck B : au-dessus du disque, sous la tonearm */
.platterHubB{
  z-index: 18; /* tonearm-layer est à 20, disque ~10 */
}

/* 2 + 3) AudioMotion propre : marge + ring + double couche */
#platterVizA.platterViz{
  inset: 16px !important;            /* Suggestion 3 : marge propre */
  z-index: 26 !important;
  opacity: 0;
  transform: scale(.992);
  transition: opacity .35s ease, transform .35s ease;

  /* Ring lisible sans toucher le bord */
  -webkit-mask-image: radial-gradient(circle at 50% 50%,
    transparent 0 54%,
    #000 58% 90%,
    transparent 93% 100%) !important;
  mask-image: radial-gradient(circle at 50% 50%,
    transparent 0 54%,
    #000 58% 90%,
    transparent 93% 100%) !important;

  filter: saturate(1.25) contrast(1.18) brightness(1.10);
}
#platterVizA.platterViz.isOn{
  opacity: 1 !important;
  transform: scale(1);
}

/* le canvas (spectrum) */
#platterVizA.platterViz canvas{
  opacity: 1;
  mix-blend-mode: screen;
  filter:
    drop-shadow(0 0 10px rgba(25,208,227,.14))
    drop-shadow(0 0 26px rgba(25,208,227,.10));
}

/* ✅ 2) Couche LED cyan continue (anneau secondaire) */
#platterVizA.platterViz::before{
  content:"";
  position:absolute;
  inset: 0;
  border-radius: 999px;
  pointer-events:none;
  z-index: 2;

  background:
    /* anneau LED fin */
    radial-gradient(circle at 50% 50%,
      rgba(0,0,0,0) 0 56%,
      rgba(25,208,227,.28) 58%,
      rgba(25,208,227,.10) 60%,
      rgba(0,0,0,0) 62%,
      rgba(0,0,0,0) 100%),
    /* léger halo doux */
    radial-gradient(circle at 50% 50%,
      rgba(25,208,227,.08),
      rgba(0,0,0,0) 62%);
  opacity: .95;
}

/* ✅ 2) Stroboscope (graduations) comme une vraie platine */
#platterVizA.platterViz::after{
  content:"";
  position:absolute;
  inset: -6px;
  border-radius: 999px;
  pointer-events:none;
  z-index: 3;

  background:
    repeating-conic-gradient(
      from 0deg,
      rgba(255,255,255,.12) 0deg 1deg,
      rgba(255,255,255,0) 1deg 6deg
    );
  opacity: .22;
  filter: blur(.35px);
  mix-blend-mode: screen;

  -webkit-mask-image: radial-gradient(circle at 50% 50%,
    transparent 0 72%,
    #000 76% 88%,
    transparent 92% 100%);
  mask-image: radial-gradient(circle at 50% 50%,
    transparent 0 72%,
    #000 76% 88%,
    transparent 92% 100%);
}

/* évite que wrap A assombrisse le viz quand disque absent */
#wrapA{
  box-shadow: none !important;
  background: transparent !important;
}

#platterVizA.platterViz canvas{
  filter:
    drop-shadow(0 0 12px rgba(25,208,227,.18))
    drop-shadow(0 0 30px rgba(25,208,227,.12))
    contrast(1.08) saturate(1.15);
}
.face {
  position: relative;
  border-radius: 16px;
  overflow: hidden;
  background:
    /* fine brushed metal texture */
    repeating-linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.18) 0px,
      rgba(255, 255, 255, 0.18) 1px,
      rgba(0, 0, 0, 0.1) 2px,
      rgba(0, 0, 0, 0.1) 3px
    ),
    linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.35),
      rgba(0, 0, 0, 0.55)
    ),
    url("");
  background-size: 200px auto, 100% 100%, cover;
  background-blend-mode: overlay;
  box-shadow: inset 0 2px 5px rgba(255,255,255,0.25),
              inset 0 -2px 8px rgba(0,0,0,0.45);
  border: 1px solid rgba(255,255,255,0.1);
}



/* === AutoNext realism helpers === */
.disk-label.swapFlash{ animation: swapFlash .45s ease; }
@keyframes swapFlash{
  0%{ filter: brightness(1) contrast(1); }
  30%{ filter: brightness(1.22) contrast(1.06); }
  100%{ filter: brightness(1) contrast(1); }
}

</style>

<link rel="stylesheet" href="./library-menu_topdown_force_local_url_fav_fixed.css">


<style id="drawer-topdown-fallback">
  .drawer{
    transform: translateY(calc(-100% - 28px)) !important;
    width: var(--dj-w) !important;
    height: var(--dj-h) !important;
    opacity: 0 !important;
    box-shadow: none !important;
    pointer-events: none !important;
  }
  .drawer.open{
    transform: translateY(0) !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    box-shadow: 0 26px 70px rgba(0,0,0,.55) !important;
  }

  .platterHubB{
  z-index: 18;
  width: 32px;
  height: 32px;
  opacity: .90;
}
:root{
  /* ✅ Force du mask (0.00 → 1.00) */
  --vizMaskAlpha: 0.88;
}

/* ✅ Mask radial piloté par opacité */
#platterVizA.platterViz{
  -webkit-mask-image: radial-gradient(circle at 50% 50%,
    rgba(0,0,0,var(--vizMaskAlpha)) 0 54%,
    #000 58% 90%,
    rgba(0,0,0,0) 93% 100%) !important;

  mask-image: radial-gradient(circle at 50% 50%,
    rgba(0,0,0,var(--vizMaskAlpha)) 0 54%,
    #000 58% 90%,
    rgba(0,0,0,0) 93% 100%) !important;
}

/* ================================
   UI : Slider "coulisse" + / - (ANTI DÉBORDEMENT)
   ================================ */

.maskAlphaCtl{
  width: 100%;
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.22);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);

  display:flex;
  align-items:center;
  gap:10px;

  /* ✅ empêche le débordement */
  flex-wrap: wrap;
  min-width: 0;
}

.maskAlphaLabel{
  font-size: 11px;
  letter-spacing: 1.2px;
  font-weight: 900;
  color: rgba(255,255,255,.75);
  white-space: nowrap;
  flex: 0 0 auto;
}

/* ✅ groupe: - slider + */
.maskAlphaGroup{
  flex: 1 1 220px;   /* grandit + rétrécit */
  min-width: 0;      /* IMPORTANT: autorise shrink */
  display:flex;
  align-items:center;
  gap:10px;
}

.maskAlphaValue{
  font-size: 11px;
  font-weight: 900;
  color: rgba(255,255,255,.78);
  white-space: nowrap;
  flex: 0 0 auto;

  /* ✅ évite les "sauts" de layout quand le texte change */
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap: 8px;

  /* réserve de la place pour "RING 100%" */
  width: 112px;

  font-variant-numeric: tabular-nums;
}
.maskAlphaValue .maskTag{
  display:inline-block;
  min-width: 44px;   /* "RING" */
  text-align:right;
  opacity: .88;
  letter-spacing: .4px;
}
.maskAlphaValue .maskPct{
  display:inline-block;
  min-width: 52px;   /* "100%" */
  text-align:right;
}

/* boutons - / + */
.maskAlphaBtn{
  appearance:none;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.90);
  width: 34px;
  height: 28px;
  border-radius: 10px;
  cursor:pointer;
  font-weight: 1000;
  line-height: 1;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 10px 18px rgba(0,0,0,.30);
  flex: 0 0 auto;
}
.maskAlphaBtn:hover{ background: rgba(255,255,255,.09); border-color: rgba(255,255,255,.22); }
.maskAlphaBtn:active{ transform: translateY(1px); }

/* slider */
.maskAlphaSlider{
  flex: 1 1 auto;
  min-width: 0;          /* ✅ évite débordement */
  height: 28px;
  appearance: none;
  -webkit-appearance: none;
  background: transparent;
  cursor: pointer;
}

/* Track */
.maskAlphaSlider::-webkit-slider-runnable-track{
  height: 10px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.55));
  border: 1px solid rgba(255,255,255,.18);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), inset 0 -1px 0 rgba(0,0,0,.55);
}
.maskAlphaSlider::-moz-range-track{
  height: 10px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.55));
  border: 1px solid rgba(255,255,255,.18);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), inset 0 -1px 0 rgba(0,0,0,.55);
}

/* Thumb (coulisse + stries) */
.maskAlphaSlider::-webkit-slider-thumb{
  -webkit-appearance: none;
  appearance: none;
  width: 34px;
  height: 22px;
  margin-top: -7px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,.20);
  background:
    repeating-linear-gradient(90deg,
      rgba(255,255,255,.20) 0 2px,
      rgba(255,255,255,0) 2px 6px),
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.22), rgba(255,255,255,0) 55%),
    linear-gradient(180deg, rgba(255,255,255,.22), rgba(0,0,0,.55));
  background-size: 18px 12px, auto, auto;
  background-position: 50% 50%, center, center;
  background-repeat: no-repeat;
  box-shadow: 0 12px 18px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.10);
}
.maskAlphaSlider::-moz-range-thumb{
  width: 34px;
  height: 22px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,.20);
  background:
    repeating-linear-gradient(90deg,
      rgba(255,255,255,.20) 0 2px,
      rgba(255,255,255,0) 2px 6px),
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.22), rgba(255,255,255,0) 55%),
    linear-gradient(180deg, rgba(255,255,255,.22), rgba(0,0,0,.55));
  background-size: 18px 12px, auto, auto;
  background-position: 50% 50%, center, center;
  background-repeat: no-repeat;
  box-shadow: 0 12px 18px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.10);
}

/* ✅ mobile : valeur sur la ligne du bas si nécessaire */
@media (max-width: 520px){
  .maskAlphaValue{
    width: 100%;
    margin-left: 0;
    text-align: right;
  }
}
/* =========================================================
   ✅ QUICK OPEN (styles Luna) — quickContent + contenus
   ========================================================= */

.drawerQuick{
  border-radius: 18px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.22);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  overflow: hidden;
}

.quickToggle{
  width:100%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 12px 12px;
  cursor:pointer;

  border:0;
  border-bottom: 1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(700px 140px at 20% 0%, rgba(255,255,255,.08), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.06), rgba(0,0,0,.22));
  color: rgba(255,255,255,.86);

  font-weight: 900;
  letter-spacing: .6px;
}

.drawerQuick:not(.open) .quickToggle{
  border-bottom-color: transparent;
}

.qtLeft{
  display:flex;
  flex-direction:column;
  gap:2px;
  min-width:0;
}
.qtTitle{
  font-size: 12px;
  letter-spacing: 2px;
  line-height: 1.1;
}
.qtSub{
  font-size: 11px;
  color: rgba(255,255,255,.60);
  font-weight: 800;
  letter-spacing: .2px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.qtDot{
  display:inline-block;
  width:10px;
  height:10px;
  border-radius:999px;
  background: rgba(255,255,255,.20);
  box-shadow: 0 0 0 4px rgba(255,255,255,.05);
  margin-right: 8px;
}
.drawerQuick.open .qtDot{
  background: var(--led2);
  box-shadow: 0 0 18px color-mix(in srgb, var(--led2) 35%, transparent), 0 0 0 4px rgba(255,255,255,.05);
}

.qtChevron{
  font-size: 14px;
  opacity: .75;
  transform: rotate(0deg);
  transition: transform .18s ease, opacity .18s ease;
}
.drawerQuick.open .qtChevron{
  transform: rotate(180deg);
  opacity: .95;
}

.quickContent{
  padding: 12px;
  display:flex;
  flex-direction:column;
  gap:10px;
}


.quickContent[hidden]{
  display:none !important;
}
.quickRow{
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
  min-width:0;
}

.quickInput{
  flex: 1 1 260px;
  min-width: 0;
  height: 40px;
  padding: 10px 12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.12);
  outline: none;
  color: rgba(255,255,255,.92);
  background: rgba(0,0,0,.35);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
.quickInput::placeholder{ color: rgba(255,255,255,.40); }
.quickInput:focus{
  border-color: color-mix(in srgb, var(--led) 45%, rgba(255,255,255,.20));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06), 0 0 0 4px rgba(25,208,227,.10);
}

.quickBtn{
  flex: 0 0 auto;
  height: 40px;
  padding: 10px 12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.14);
  background:
    radial-gradient(circle at 30% 20%, rgba(255,255,255,.16), rgba(255,255,255,0) 45%),
    linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.55));
  color: rgba(255,255,255,.90);
  font-weight: 900;
  letter-spacing: .2px;
  cursor:pointer;
  box-shadow: 0 14px 22px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.10);
  transition: transform .08s ease, filter .15s ease, border-color .15s ease;
}
.quickBtn:hover{ filter: brightness(1.05); border-color: rgba(255,255,255,.22); }
.quickBtn:active{ transform: translateY(1px); }

.quickCheck{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 8px 10px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.20);
  color: rgba(255,255,255,.75);
  font-size: 12px;
  flex: 1 1 auto;
}
.quickCheck input{
  width: 16px;
  height: 16px;
  accent-color: var(--led2);
}

.quickHint{
  padding: 10px 12px;
  border-radius: 16px;
  border:1px dashed rgba(255,255,255,.14);
  background: rgba(0,0,0,.18);
  color: var(--muted);
  font-size: 12px;
  line-height: 1.45;
}

/* Favoris / Recent */
.quickFav, .quickRecent{
  border-radius: 18px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
  overflow:hidden;
}

.quickFavHead, .quickRecentHead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 10px 12px;
  border-bottom: 1px solid rgba(255,255,255,.10);
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(0,0,0,.18));
  color: rgba(255,255,255,.82);
}
.quickFavHead b, .quickRecentHead b{
  letter-spacing: 2px;
  font-size: 11px;
}
.favActions{ display:flex; gap:8px; align-items:center; }

.miniBtn{
  appearance:none;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.90);
  padding: 8px 10px;
  border-radius: 12px;
  cursor:pointer;
  font-weight: 900;
  letter-spacing: .2px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 10px 18px rgba(0,0,0,.28);
}
.miniBtn:hover{ background: rgba(255,255,255,.09); border-color: rgba(255,255,255,.22); }
.miniBtn:active{ transform: translateY(1px); }

/* bouton X (supprimer favori) */
.favRemove{
  appearance:none;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.22);
  color: rgba(255,255,255,.80);
  width: 30px;
  height: 30px;
  border-radius: 12px;
  cursor:pointer;
  font-weight: 1000;
  line-height: 1;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
.favRemove:hover{ background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.20); }
.favRemove:active{ transform: translateY(1px); }

/* petits ajustements dans les listes */
.trackList{
  padding: 10px;
}
.trackItem.favItem{
  position: relative;
}
.trackItem.favItem .badge{
  margin-left: 0;
}
